<!DOCTYPE html>
<html>
	<title>Punjabnewline</title>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1">
			<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
			<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
			<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
			<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
			<script type="text/javascript">
			
    // Make your jQuery Mobile framework configuration changes here!

  





$(document).ready(function(){
  $.mobile.allowCrossDomainPages = true;

$.mobile.showPageLoadingMsg("a","Loading",true);

	
 

					   		$.ajax({url: "http://www.punjabnewsline.com/topnews.json",
					        dataType: "json",
					        async: true,
					        success: function (result) {
					       // $('.news-details').remove();
					       
					        ajax.parseJSON(result);
					        
					        },
					        error: function (request,error) {
					        	
					          //  alert('Network error has occurred please try again!');
					        }
					    });         
	   				
});


var ajax = { 
	 parseJSON:function(result){
	    $.each( result, function(i, row) {
       
            $('#news-data').append('<li><a data-role="button" data-transition="flow"  href="#headline'+i+'"><h3>' +row.title+ '</h3></a></li>');
          
           
           var story_pages='<div data-role="page" class="news-details"  id="headline'+i+'"></div>';
           var story_header='<div data-role="header" data-theme="b"  data-position="fixed"><a href="#menu-panel'+i+'" data-icon="grid" data-iconshadow="true" class="ui-btn-left" data-theme="b">Menu</a><h1><img src="images/logo.png" width="75%" /></h1></div>';
           var story_content='<div class="news-title">'+row.title+'</div><div class="story_img_cont"><img class="story_img" src="'+row.imagea+'"  /></div><div class="news-date">'+row.date+'</div><div class="story-style">'+row.story+'</div>';
          var story_nav='<div data-role="panel" class="menu-panela" id="menu-panel'+i+'" data-theme="a"></div>';
          
          var story_container='<div data-role="content" id="story-container'+i+'"></div>'
          $('body').append(story_pages); 
          $('#headline'+i).append(story_header);
         $('#headline'+i).append(story_nav);
         $('#menu-panel'+i).load('nav.html');
         $('#headline'+i).append(story_container);
          $('#story-container'+i).append(story_content);
        
        
        });
        $.mobile.hidePageLoadingMsg();
        $('#news-data').listview('refresh');
    }
}

				
				
			</script>
		<link href="style.css" rel="stylesheet" media="screen" type="text/css" \>
	</head>
	<body>
	<div data-role="page" id="this_page">
		<div data-role='header' data-theme='b' data-position="fixed">
			<a href="#menu-panel" data-icon="grid" data-iconshadow="true" class="ui-btn-left" data-theme="b">Menu</a>
			<h1><img src="images/logo.png" width="75%" /></h1>
		</div>
		
		<div data-role="panel" class="menu-panela" id="menu-panel" data-theme="a">
			
		<ul  data-role="listview" data-theme="a">
			<li class="list-menu" data-theme="a">Menu</li>
			<li><a rel="topnews" href="index.html" data-ajax="false">Home</a></li>
			<li><a rel="punjab" href="punjab.html"  data-ajax="false">Punjab</a></li>
			<li><a rel="national" href="national.html"   data-ajax="false">National</a></li>
			<li><a rel="international" href="international.html"   data-ajax="false">International</a></li>
			<li><a rel="nri" href="nri.html"   data-ajax="false">NRI</a></li>
			<li><a rel="featured" href="featured.html"   data-ajax="false">Featured</a></li>
			<li><a rel="business" href="business.html"   data-ajax="false">Business</a></li>
			<li><a rel="sports" href="sports.html"   data-ajax="false">Sports</a></li>
			<li><a rel="entertainment" href="entertainment.html"   data-ajax="false">Entertainment</a></li>
			<li><a rel="blogs" href="blogs.html"   data-ajax="false">Blogs</a></li>
			<li><a rel="gallery" href="gallery.html"   data-ajax="false">Gallery</a></li>
		</ul>
				
		</div>
		
		
		<div data-role="content">
            <ul data-role="listview"  id="news-data" data-theme="c">

            </ul>
	        
        </div>
		
		
		
	</div>
		   
	     
	</body>
</html>